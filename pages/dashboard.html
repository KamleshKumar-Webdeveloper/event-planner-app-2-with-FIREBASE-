<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="../styling/dashboard.css" />
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"
    ></script>

    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"
    ></script>
    <script defer src="../init-firebase.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light" id="navbar">
      <div class="container-fluid">
        <a
          class="navbar-brand"
          href="#"
          style="font-weight: 500; font-size: 30px"
        >
          Dashboard
        </a>
        <div class="d-flex justify-content-center align-items-center">
          <button
            class="me-2 add-event-btn p-2"
            type="submit"
            id="add-event-btn"
          >
            Add Event
          </button>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon" style="color: #9b59b6"></span>
          </button>
        </div>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0 gap-2">
            <li class="nav-item event-btn my-2 my-lg-0">
              <a class="nav-link active" aria-current="page" href="#"
                >Create Event</a
              >
            </li>
            <li class="nav-item event-btn my-2 my-lg-0">
              <a class="nav-link active" aria-current="page" href="#"
                >My Events</a
              >
            </li>
          </ul>
          <div id="nav-part2">
            <button class="btn btn-danger" type="submit" id="logout-btn">
              Log Out
            </button>
          </div>
        </div>
      </div>
    </nav>

    <main class="container mt-4">
      <div class="card-container">
        <div class="event-card" onclick="openEventPage(this)">
          <div class="event-image">
            <img src="[event-image-url]" alt="event image" class="img-fluid" />
            <span class="category-badge">category</span>
          </div>
          <div class="event-details">
            <h3 class="event-title">Event Name</h3>
            <p class="event-desc" data-full-desc="[full-description]">
              [short-description]
            </p>
            <div class="event-meta">
              <span id="event-date">Date</span>
              <span id="event-time">Time</span>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      function openEventPage(card) {
        const eventData = {
          title: card.querySelector(".event-title").textContent,
          desc: card.querySelector(".event-desc").getAttribute("data-full-desc"),
          image: card.querySelector(".event-image img").src,
          date: card.querySelector("#event-date").textContent,
          time: card.querySelector("#event-time").textContent,
          category: card.querySelector(".category-badge").textContent
        };
        
        const params = new URLSearchParams(eventData);
        window.location.href = `../pages/carddetail.html?${params}`;
      }
    </script>
  </body>
</html>
